<metainfo>
  <schemaVersion>2.0</schemaVersion>
  <application>
    <name>DRUID</name>
    <comment>Scalable High-throughput OLAP cube</comment>
    <version>${druid.version}</version>
    <exportedConfigs>None</exportedConfigs>

    <exportGroups>
      <exportGroup>
        <name>servers</name>
        <exports>
          <export>
            <name>io.druid.coordinator</name>
            <value>${DRUID_COORDINATOR_HOST}:${site.coordinator.druid.port}</value>
          </export>
          <export>
            <name>io.druid.realtime</name>
            <value>${DRUID_REALTIME_HOST}:${site.realtime.druid.port}</value>
          </export>
          <export>
            <name>io.druid.historical</name>
            <value>${DRUID_HISTORICAL_HOST}:${site.historical.druid.port}</value>
          </export>
          <export>
            <name>io.druid.broker</name>
            <value>${DRUID_BROKER_HOST}:${site.broker.druid.port}</value>
          </export>
        </exports>
      </exportGroup>
    </exportGroups>

    <components>
      <component>
        <name>DRUID_COORDINATOR</name>
        <category>MASTER</category>
        <minInstanceCount>1</minInstanceCount>
        <compExports>servers-io.druid.coordinator</compExports>
        <exportedConfigs>coordinator</exportedConfigs>
        <commandScript>
          <script>scripts/coordinator.py</script>
          <scriptType>PYTHON</scriptType>
        </commandScript>
      </component>
      <component>
        <name>DRUID_HISTORICAL</name>
        <category>MASTER</category>
        <minInstanceCount>1</minInstanceCount>
        <compExports>servers-io.druid.historical</compExports>
        <exportedConfigs>historical</exportedConfigs>
        <commandScript>
          <script>scripts/historical.py</script>
          <scriptType>PYTHON</scriptType>
        </commandScript>
      </component>
      <component>
        <name>DRUID_REALTIME</name>
        <category>MASTER</category>
        <minInstanceCount>0</minInstanceCount>
        <compExports>servers-io.druid.realtime</compExports>
        <exportedConfigs>realtime</exportedConfigs>
        <commandScript>
          <script>scripts/realtime.py</script>
          <scriptType>PYTHON</scriptType>
        </commandScript>
      </component>
      <component>
        <name>DRUID_BROKER</name>
        <category>SLAVE</category>
        <minInstanceCount>0</minInstanceCount>
        <compExports>servers-io.druid.broker</compExports>
        <exportedConfigs>broker</exportedConfigs>
        <commandScript>
          <script>scripts/broker.py</script>
          <scriptType>PYTHON</scriptType>
        </commandScript>
      </component>
    </components>

    <configFiles>
      <configFile>
        <type>xml</type>
        <fileName>log4j2.xml</fileName>
        <dictionaryName>log4j</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>druid.xml</fileName>
        <dictionaryName>druid</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>_common.xml</fileName>
        <dictionaryName>_common</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>broker.xml</fileName>
        <dictionaryName>broker</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>historical.xml</fileName>
        <dictionaryName>historical</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>realtime.xml</fileName>
        <dictionaryName>realtime</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>coordinator.xml</fileName>
        <dictionaryName>coordinator</dictionaryName>
      </configFile>
      <configFile>
        <type>xml</type>
        <fileName>overlord.xml</fileName>
        <dictionaryName>overlord</dictionaryName>
      </configFile>
    </configFiles>

    <osSpecifics>
      <osSpecific>
        <osType>any</osType>
        <packages>
          <package>
            <type>tarball</type>
            <name>files/druid-${druid.version}.tgz</name>
          </package>
        </packages>
      </osSpecific>
    </osSpecifics>

  </application>
</metainfo>
